I"<p>第二章中，主要讲CPU如何执行指令的角度讲解了8086的逻辑结构、形成物理地址的方法、相关的寄存器以及一些指令。这一章将从访问内存的角度继续学习几个寄存器。</p>

<h3 id="31-内存中字的存储">3.1 内存中字的存储</h3>

<table>
  <tbody>
    <tr>
      <td>0</td>
      <td>20H</td>
    </tr>
    <tr>
      <td>1</td>
      <td>4EH</td>
    </tr>
    <tr>
      <td>2</td>
      <td>12H</td>
    </tr>
    <tr>
      <td>3</td>
      <td>00H</td>
    </tr>
    <tr>
      <td>4</td>
      <td> </td>
    </tr>
    <tr>
      <td>4</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<p>本例中，我们用0、1两个内存单元存放数据20000(4E20H)。其中0位为地地址单元，1号为高地址单元，同理在2、3号单元中存放数据18（0012H)。</p>

<blockquote>
  <p>子单元的概念，即存放一个<strong>字形数据</strong>（16位）的内存单元，由两个地址连续的内存单元组成。高低地址内存单元分别存放字型数据的高低字节。</p>
</blockquote>

<blockquote>
  <p>注意这里引入的几个概念：</p>
</blockquote>

<ol>
  <li>字节单元，字节型数据。我们一般所指的地址单元，如0地址单元所指的就是字节单元，所以在例子中的0地址单元中存放的字节型数据为20，一个内存地址存放的就是一个字节。</li>
  <li>字单元，字型数据。这里的字单元与字型数据值得为一个字，均考虑两个字节。而当提及字型数据时，记住要将数据延伸到其对应高位，如本例中1地址单元中存放的字型数据为124EH。</li>
</ol>

<h3 id="32-ds和address">3.2 DS和[address]</h3>

<p>下面代码来实现读取10000H单元的内容：</p>

<pre><code class="language-assembly">mov bx, 1000H
mov ds, bx
mov al, [0]
</code></pre>

<blockquote>
  <p>这里有两点需要注意：</p>
</blockquote>

<ol>
  <li>8086CPU<strong>不支持将数据直接送入段寄存器的操作，ds是一个段寄存器</strong>，所以<code class="language-plaintext highlighter-rouge">mov ds, 1000H</code>这两条指令是非法的。</li>
  <li>8086CPU自动取ds中的数据为内存单元的段地址。</li>
  <li>第三行中[…]表示一个内存单元，<code class="language-plaintext highlighter-rouge">[...]</code>中的0表示内存单元的<strong>偏离地址</strong>。</li>
  <li>也可以将通用寄存器存储到偏移地址中，命令为<code class="language-plaintext highlighter-rouge">mov [0], al</code></li>
</ol>

<p>总结：</p>

<blockquote>
  <p>数据 —&gt; 通用寄存器 —&gt; 段寄存器</p>
</blockquote>

<h3 id="33-字的传送">3.3 字的传送</h3>

<p>前面我们用mov指令在寄存器和内存之间进行字节型的传送。因为8086CPU是16位结构，有16根数据线，所以，可以一次性传送16位的数据，也就是说可以一次性传送<strong>一个字</strong>。只要在mov指令中给出16位的寄存器就可以进行16位的数据传送。</p>

<pre><code class="language-assembly">mov bx, 1000H
mov ds, bx
mov ax, [0]
mov [0], cx
</code></pre>

<blockquote>
  <p>代码中有几个需要注意的地方：</p>
</blockquote>

<ol>
  <li>第三行中如果给出的不是ax而是al，则存入的是8位的数据</li>
  <li>第三行，1000:0处的字型数据送入ax, 字型数据为16位的，高位为10001，低位为10000，因为内存单元中只能存放8位数据</li>
</ol>
:ET