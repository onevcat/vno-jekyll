I"Ä><p>æ•´ç†è‡ªå°ç”²é±¼<a href="https://fishc.com.cn/">é±¼Cè®ºå›</a></p>

<h3 id="ç®€å•å®šåˆ¶">ç®€å•å®šåˆ¶</h3>

<p>ä¸‹é¢æ¥åšä¸€ä¸ªæ¡ˆä¾‹ï¼Œè¦æ±‚å¦‚ä¸‹ï¼š</p>

<ol>
  <li>å®šåˆ¶ä¸€ä¸ªè®¡æ—¶å™¨çš„ç±»</li>
  <li>startå’Œstopæ–¹æ³•ä»£è¡¨å¯åŠ¨å®šæ—¶å’Œåœæ­¢è®¡æ—¶</li>
  <li>å‡è®¾è®¡æ—¶å™¨å¯¹è±¡t1ï¼Œprint(t1)å’Œç›´æ¥è°ƒç”¨t1å‡æ˜¾ç¤ºç»“æœ</li>
  <li>å½“è®¡æ—¶å™¨æœªå¯åŠ¨æˆ–å·²ç»åœæ­¢è®¡æ—¶ï¼Œè°ƒç”¨stopæ–¹æ³•ä¼šç»™äºˆæ¸©é¦¨çš„æç¤º</li>
  <li>åƒä¸ªè®¡æ—¶å™¨å¯¹è±¡å¯ä»¥ç›¸åŠ ï¼št1+t2</li>
  <li>åªèƒ½ä½¿ç”¨æä¾›çš„æœ‰é™èµ„æºå®Œæˆ</li>
</ol>

<p>éœ€è¦ç”¨åˆ°ä¸‹é¢çš„èµ„æºï¼š</p>

<ol>
  <li>ä½¿ç”¨timeæ¨¡å—çš„localtimeæ–¹æ³•è·å–æ—¶é—´</li>
  <li>time.localtimeè¿”å›struct_timeçš„æ—¶é—´æ ¼å¼</li>
  <li>__str__()å’Œ__repr__()é­”æ³•æ–¹æ³•</li>
  <li>å…¶ä¸­ï¼Œ__str__()å’Œ__repr__()é­”æ³•æ–¹æ³•çš„ç”¨æ³•å¦‚ä¸‹ï¼š</li>
</ol>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># __str__()çš„ä»£ç ç¤ºä¾‹
</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">class</span> <span class="nc">A</span><span class="p">:</span>
        <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">return</span> <span class="s">"A"</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="n">A</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="n">A</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span>
<span class="o">&gt;&gt;&gt;</span> <span class="o">&lt;</span><span class="n">__main__</span><span class="p">.</span><span class="n">A</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0x03260F30</span><span class="o">&gt;</span>

<span class="c1"># __repr__()çš„ä»£ç ç¤ºä¾‹
</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">class</span> <span class="nc">B</span><span class="p">:</span>
        <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">return</span> <span class="s">"B"</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span> <span class="o">=</span> <span class="n">B</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span>
<span class="n">B</span>
</code></pre></div></div>

<p>é¦–å…ˆè°ˆä¸€ä¸‹â€”__str__()çš„æ–¹æ³•ï¼Œåœ¨æ‰“å°ä¸€ä¸ªå®ä¾‹åŒ–å¯¹è±¡æ—¶ï¼Œæ‰“å°çš„å…¶å®å’Œæ˜¯ä¸€ä¸ªå¯¹è±¡çš„åœ°å€ã€‚è€Œé€šè¿‡__str__()å‡½æ•°å°±å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ‰“å°å¯¹è±¡ä¸­å…·ä½“çš„å±æ€§å€¼ï¼Œå› ä¸ºåœ¨pythonä¸­è°ƒç”¨printå‡½æ•°æ‰“å°å®ä¾‹åŒ–å¯¹è±¡æ—¶å°±ä¼šè°ƒç”¨__str__()çš„æ–¹æ³•ï¼Œå¦‚æœ__str__()ä¸­æœ‰è¿”å›å€¼ï¼Œå°±ä¼šæ‰“å°å…¶ä¸­çš„è¿”å›å€¼ã€‚</p>

<p>è€Œ__repr__()æœ¬èº«åŠŸèƒ½ä¸ºæ˜¾ç¤ºè‡ªèº«çš„å±æ€§ï¼Œåœ¨å®ä¾‹åŒ–ä»¥åï¼Œè°ƒç”¨è‡ªèº«å°±ä¼šæ‰“å°å‡ºå±æ€§ã€‚</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">time</span> <span class="k">as</span> <span class="n">t</span>

<span class="k">class</span> <span class="nc">Mytimer</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">unit</span> <span class="o">=</span> <span class="p">[</span><span class="s">'å¹´'</span><span class="p">,</span> <span class="s">'æœˆ'</span><span class="p">,</span> <span class="s">'å¤©'</span><span class="p">,</span> <span class="s">'å°æ—¶'</span><span class="p">,</span> <span class="s">'åˆ†é’Ÿ'</span><span class="p">,</span> <span class="s">'ç§’'</span><span class="p">]</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">prompt</span> <span class="o">=</span> <span class="s">"è¿˜æœªå¼€å§‹è®¡æ—¶"</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">last_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">begin</span> <span class="o">=</span> <span class="mi">0</span>    <span class="c1"># è¿™é‡Œå¦‚æœä½¿ç”¨self.start = 0ï¼Œ
</span>                          <span class="c1"># ä¼šå› ä¸ºåœ¨__init__()æ–¹æ³•ä¸­ä½¿ç”¨
</span>                          <span class="c1"># ä¸ç±»ä¸­æ–¹æ³•ç›¸åŒçš„åçš„å±æ€§ï¼Œè€Œè¦†ç›–æ–¹æ³•
</span>        <span class="bp">self</span><span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">start</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">begin</span> <span class="o">=</span> <span class="n">t</span><span class="p">.</span><span class="n">localtime</span><span class="p">()</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">prompt</span> <span class="o">=</span> <span class="s">"è¯·è°ƒç”¨stop()å¼€å§‹è®¡æ—¶"</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"è®¡æ—¶å¼€å§‹"</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">t</span><span class="p">.</span><span class="n">localtime</span><span class="p">()</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">calc</span><span class="p">()</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"è®¡æ—¶ç»“æŸ"</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">calc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">last_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">prompt</span> <span class="o">=</span> <span class="s">"æ€»å…±è¿è¡Œäº†"</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">):</span>
            <span class="bp">self</span><span class="p">.</span><span class="nb">list</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">stop</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="p">.</span><span class="n">start</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">prompt</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">last_list</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="p">.</span><span class="n">prompt</span>

    <span class="n">__repr__</span> <span class="o">=</span> <span class="n">__str__</span>    <span class="c1"># å®ç°print(å®ä¾‹å¯¹è±¡)å’Œ
</span>                          <span class="c1"># ç›´æ¥è°ƒç”¨å®ä¾‹å¯¹è±¡éƒ½ä¼š
</span>                          <span class="c1"># æ˜¾ç¤ºç»“æœ
</span>
    <span class="n">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">prompt</span> <span class="o">=</span> <span class="s">'æ€»å…±è¿è¡Œäº†'</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">):</span>
            <span class="n">result</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">result</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">other</span><span class="p">.</span><span class="n">result</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">result</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
                <span class="n">prompt</span> <span class="o">+=</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">+</span> <span class="bp">self</span><span class="p">.</span><span class="n">unit</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">prompt</span>
</code></pre></div></div>
<p>ä½†æ˜¯ä»¥ä¸Šçš„ç»Ÿè®¡è¿è¡Œæ—¶é—´æ–¹æ³•åªèƒ½è®¡ç®—çŸ­æ—¶é—´ä»¥å†…çš„æ—¶é—´ï¼Œå½“æˆ‘ä»¬æƒ³è¦è®¡ç®—æ¯”è¾ƒé•¿æ—¶é—´çš„é—´éš”å°±ä¼šå‡ºç°é—®é¢˜ï¼Œæ¯”å¦‚å¦‚æœå¼€å§‹è®¡æ—¶çš„æ—¶é—´æ˜¯2022å¹´2æœˆ22æ—¥16:30:30ï¼Œåœæ­¢æ—¶é—´æ˜¯2025å¹´1æœˆ23æ—¥15:30:30å°±ä¼šå‡ºç°è´Ÿæ•°(å°æ—¶:åˆ†é’Ÿ:ç§’å¯ä»¥é€šè¿‡ç¨‹åºè§£å†³ï¼Œä½†æ˜¯æœˆä»½å°±ä¼šå‡ºç°é—°å¹´é—®é¢˜ï¼Œå˜å¾—å¾ˆéš¾å¤„ç†)ã€‚</p>

<p>å¯¹äºè¿™ä¸€é—®é¢˜ï¼Œå¯ä»¥ç”¨timeæ¨¡å—çš„perf_counter()å’Œprocee_time()æ¥è®¡ç®—ï¼Œå…¶ä¸­, <br /></p>

<p><strong>perf_counter()è¿”å›è®¡æ—¶å™¨çš„ç²¾å‡†æ—¶é—´(ç³»ç»Ÿçš„è¿è¡Œæ—¶é—´)</strong>ï¼›<br />
<strong>process_time()è¿”å›å½“å‰è¿›ç¨‹æ‰§è¡ŒCPUçš„æ—¶é—´æ€»å’Œ</strong>ã€‚</p>

<p>å°è¯•é€šè¿‡perf_counter()ä»¥åŠprocess_time()è¿™ä¸¤ä¸ªå‡½æ•°æ¥æ”¹å†™ç¨‹åºï¼Œå¹¶åŠ å…¥èƒ½å¤Ÿè¿ç»­ç»Ÿè®¡å¤šæ¬¡è¿è¡Œç¨‹åºçš„æ—¶é—´æ€»é•¿ï¼š</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">time</span> <span class="k">as</span> <span class="n">t</span>

<span class="k">class</span> <span class="nc">Mytimer</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">,</span> <span class="n">number</span> <span class="o">=</span> <span class="mi">1000000</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">prompt</span> <span class="o">=</span> <span class="s">"è¿˜æœªå¼€å§‹è®¡æ—¶"</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">default_timer</span> <span class="o">=</span> <span class="n">t</span><span class="p">.</span><span class="n">perf_counter</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">begin</span> <span class="o">=</span> <span class="mi">0</span>    <span class="c1"># è¿™é‡Œå¦‚æœä½¿ç”¨self.start = 0ï¼Œ
</span>                          <span class="c1"># ä¼šå› ä¸ºåœ¨__init__()æ–¹æ³•ä¸­ä½¿ç”¨
</span>                          <span class="c1"># ä¸ç±»ä¸­æ–¹æ³•ç›¸åŒçš„åçš„å±æ€§ï¼Œè€Œè¦†ç›–æ–¹æ³•
</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">lasted</span> <span class="o">=</span> <span class="mf">0.0</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="p">.</span><span class="n">prompt</span>

    <span class="n">__repr__</span> <span class="o">=</span> <span class="n">__str__</span>    <span class="c1"># å®ç°print(å®ä¾‹å¯¹è±¡)å’Œ
</span>                          <span class="c1"># ç›´æ¥è°ƒç”¨å®ä¾‹å¯¹è±¡éƒ½ä¼š
</span>                          <span class="c1"># æ˜¾ç¤ºç»“æœ
</span>
    <span class="k">def</span> <span class="nf">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">lasted</span> <span class="o">+</span> <span class="n">other</span><span class="p">.</span><span class="n">lasted</span>
        <span class="n">prompt</span> <span class="o">=</span> <span class="s">'æ€»å…±è¿è¡Œäº†%0.2fç§’'</span> <span class="o">%</span> <span class="n">result</span>
        <span class="k">return</span> <span class="n">prompt</span>

    <span class="k">def</span> <span class="nf">set_timer</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">timer</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">timer</span> <span class="o">==</span> <span class="s">"process_time"</span><span class="p">:</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">default_timer</span> <span class="o">=</span> <span class="n">process_time</span>
        <span class="k">elif</span> <span class="n">timer</span><span class="p">:</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">default_timer</span> <span class="o">=</span> <span class="n">perf_counter</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s">"è¾“å…¥æ— æ•ˆï¼Œè¯·é‡æ–°è¾“å…¥perf_counteræˆ–process_time"</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">timing</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">defalt_timer</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">number</span><span class="p">):</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">func</span><span class="p">()</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">default_timer</span><span class="p">()</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">lasted</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">end</span> <span class="o">-</span> <span class="bp">self</span><span class="p">.</span><span class="n">start</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">prompt</span> <span class="o">=</span> <span class="s">"æ€»å…±è¿è¡Œäº†%0.2fç§’"</span> <span class="o">%</span> <span class="bp">self</span><span class="p">.</span><span class="n">lasted</span>
</code></pre></div></div>

<p>è¿™ä¸€è®²ä¸»è¦å‘Šè¯‰äº†ä¸€ä¸ªé“ç†ï¼Œåƒä¸‡ä¸è¦è‡ªå·±ç¼–è¾‘ç¨‹åºè®¡æ—¶å™¨ã€‚è®¡æ—¶å™¨å‡ºç°é—®é¢˜ï¼Œå¤±è´¥ä»£ä»·æˆæœ¬å¤ªé«˜!</p>

:ET