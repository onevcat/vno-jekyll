I"É|<p>æ•´ç†è‡ªå°ç”²é±¼<a href="https://fishc.com.cn/">é±¼Cè®ºå›</a></p>

<!-- TOC GFM -->

<ul>
  <li><a href="#ä»€ä¹ˆæ˜¯ç”Ÿæˆå™¨">ä»€ä¹ˆæ˜¯ç”Ÿæˆå™¨</a></li>
  <li><a href="#ååŒç¨‹åº">ååŒç¨‹åº</a></li>
  <li><a href="#ç”Ÿæˆå™¨è¡¨è¾¾å¼">ç”Ÿæˆå™¨è¡¨è¾¾å¼</a>
    <ul>
      <li><a href="#åˆ—è¡¨æ¨å¯¼å¼--list-comprehensions-">åˆ—è¡¨æ¨å¯¼å¼ ( list comprehensions )</a></li>
      <li><a href="#å­—å…¸æ¨å¯¼å¼--dictionary-comprehension-">å­—å…¸æ¨å¯¼å¼ ï¼ˆ dictionary comprehension ï¼‰</a></li>
      <li><a href="#ç»“åˆæ¨å¯¼å¼--set-comprehension-">ç»“åˆæ¨å¯¼å¼ ï¼ˆ set comprehension ï¼‰</a></li>
    </ul>
  </li>
  <li><a href="#ä½œä¸š">ä½œä¸š</a></li>
  <li><a href="#å…³äº-yield-ä¸-generator-æé«˜ç¯‡">å…³äº yield ä¸ Generator æé«˜ç¯‡</a>
    <ul>
      <li><a href="#ååŒååŒç¨‹åºä¸å­ä¾‹ç¨‹">ååŒï¼ˆååŒç¨‹åºï¼‰ä¸å­ä¾‹ç¨‹</a></li>
    </ul>
  </li>
  <li><a href="#nextå’Œsendç”¨æ³•"><code class="language-plaintext highlighter-rouge">next()</code>å’Œ<code class="language-plaintext highlighter-rouge">send()</code>ç”¨æ³•</a></li>
  <li><a href="#æ€»ç»“">æ€»ç»“</a></li>
</ul>

<!-- /TOC -->

<h3 id="ä»€ä¹ˆæ˜¯ç”Ÿæˆå™¨">ä»€ä¹ˆæ˜¯ç”Ÿæˆå™¨</h3>

<p>ç”Ÿæˆå™¨ï¼ˆ iterator ï¼‰å’Œè¿­ä»£å™¨ï¼ˆ generator ï¼‰æ˜¯ Python ä»Šå¹´æ¥å¼•å…¥çš„æœ€å¼ºå¤§çš„ä¸¤ä¸ªç‰¹æ€§ï¼Œä½†å…¶ä¸æ¶‰åŠé­”æ³•æ–¹æ³•ï¼Œå¯ä»¥å·§å¦™é¿å¼€ç±»å’Œå¯¹è±¡ï¼Œä»…é€šè¿‡æ™®é€šçš„å‡½æ•°å³å¯å®ç°ã€‚</p>

<p>ç”Ÿæˆå™¨å…¶å®æ˜¯è¿­ä»£å™¨çš„ä¸€ç§å®ç°ï¼Œå…¶ç›®çš„æ˜¯ä¸ºäº†ä½¿å¾— Python æ›´ä¸ºç®€æ´ï¼Œå› ä¸ºè¿­ä»£å™¨éœ€è¦æˆ‘ä»¬å»å®šä¹‰ä¸€ä¸ªç±»å’Œå®ç°ç›¸å…³çš„æ–¹æ³•ï¼Œè€Œç”Ÿæˆå™¨åˆ™åªéœ€è¦åœ¨æ™®é€šçš„å‡½æ•°ä¸­åŠ ä¸Šä¸€ä¸ª<code class="language-plaintext highlighter-rouge">yield</code>è¯­å¥å³å¯ã€‚</p>

<p>ç”Ÿæˆå™¨çš„å‘æ˜ä½¿å¾— Python æ¨¡ä»¿<strong>ååŒç¨‹åº</strong>çš„æ¦‚å¿µå¾—ä»¥å®ç°ã€‚</p>

<h3 id="ååŒç¨‹åº">ååŒç¨‹åº</h3>

<p><strong>ååŒç¨‹åº</strong>å°±æ˜¯å¯ä»¥è¿è¡Œçš„ç‹¬ç«‹å‡½æ•°è°ƒç”¨ï¼Œå‡½æ•°å¯ä»¥<strong>æš‚å®š</strong>æˆ–è€…<strong>æŒ‚èµ·</strong>ï¼Œå¹¶ä»ç¨‹åºç¦»å¼€çš„åœ°æ–¹ç»§ç»­æˆ–è€…é‡æ–°å¼€å§‹ã€‚</p>

<p>å¯¹äºä¸€ä¸ªæ™®é€šçš„ Pyhton å‡½æ•°ï¼Œä¸€èˆ¬æ˜¯ä»å‡½æ•°çš„ç¬¬ä¸€è¡Œä»£ç å¼€å§‹æ‰§è¡Œï¼Œç»“æŸäº return è¯­å¥ã€å¼‚å¸¸æˆ–è€…å‡½æ•°æ‰€æœ‰è¯­å¥æ‰§è¡Œå®Œæ¯•ï¼ˆ<code class="language-plaintext highlighter-rouge">return None</code>ï¼‰ã€‚ä¸€æ—¦å‡½æ•°å°†æ§åˆ¶æƒäº¤è¿˜ç»™è°ƒç”¨è€…ï¼Œå°±æ„å‘³ç€å…¨éƒ¨ç»“æŸã€‚å‡½æ•°ä¸­åšçš„æ‰€æœ‰å·¥ä½œä»¥åŠä¿å­˜åœ¨å±€éƒ¨å˜é‡ä¸­çš„æ•°æ®éƒ½å°†ä¸¢å¤±ã€‚å†æ¬¡è°ƒç”¨è¿™ä¸ªå‡½æ•°æ—¶ï¼Œä¸€åˆ‡éƒ½å°†ä»å¤´åˆ›å»ºã€‚</p>

<p>Pyhton æ˜¯é€šè¿‡ç”Ÿæˆå™¨æ¥å®ç°ç±»ä¼¼äºååŒç¨‹åºçš„æ¦‚å¿µï¼šç”Ÿæˆå™¨å¯ä»¥æš‚æ—¶æŒ‚èµ·å‡½æ•°ï¼Œå¹¶ä¿ç•™å‡½æ•°çš„å±€éƒ¨å˜é‡ç­‰æ•°æ®ï¼Œç„¶åå†æ¬¡è°ƒç”¨å®ƒçš„æ—¶å€™ï¼Œä»ä¸Šæ¬¡æš‚åœçš„ä½ç½®åŸºåºæ‰§è¡Œä¸‹å»ã€‚</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">myGen</span><span class="p">():</span>
	<span class="k">print</span><span class="p">(</span><span class="s">'ç”Ÿæˆå™¨è¢«æ‰§è¡Œã€‚'</span><span class="p">)</span>
	<span class="k">yield</span> <span class="mi">1</span>
	<span class="k">yield</span> <span class="mi">2</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">myG</span> <span class="o">=</span> <span class="n">myGen</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">myG</span><span class="p">)</span>
<span class="n">ç”Ÿæˆå™¨è¢«æ‰§è¡Œ</span><span class="err">ã€‚</span>
<span class="mi">1</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">myG</span><span class="p">)</span>
<span class="mi">2</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">myG</span><span class="p">)</span>
<span class="nb">StopIteration</span> <span class="c1"># å¼‚å¸¸æŠ¥é”™
</span></code></pre></div></div>

<p>åˆ©ç”¨<code class="language-plaintext highlighter-rouge">next()</code>å‡½æ•°å½“è¶…å‡ºå‡½æ•°èŒƒå›´æ—¶ï¼Œå°±æ˜¯æŠ›å‡º StopIteration å¼‚å¸¸ã€‚</p>

<p>ç”±äº<code class="language-plaintext highlighter-rouge">for</code>å¾ªç¯åŒ…å«<code class="language-plaintext highlighter-rouge">next()</code>ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥ç”¨æ¥å¯¹ç”Ÿæˆå™¨äº§ç”Ÿä½œç”¨ã€‚</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">my</span> <span class="n">Gen</span><span class="p">():</span>
	<span class="k">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

<span class="n">ç”Ÿæˆå™¨è¢«æ‰§è¡Œ</span><span class="err">ã€‚</span>
<span class="mi">1</span>
<span class="mi">2</span>
</code></pre></div></div>

<h3 id="ç”Ÿæˆå™¨è¡¨è¾¾å¼">ç”Ÿæˆå™¨è¡¨è¾¾å¼</h3>

<h4 id="åˆ—è¡¨æ¨å¯¼å¼--list-comprehensions-">åˆ—è¡¨æ¨å¯¼å¼ ( list comprehensions )</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="n">i</span><span class="o">*</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span>
<span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">49</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">81</span><span class="p">]</span>
</code></pre></div></div>

<p>ç›¸å½“äº,</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">list</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
	<span class="n">list1</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span> <span class="o">*</span> <span class="n">i</span><span class="p">)</span>
</code></pre></div></div>

<p>å†ä¸¾ä¸ªä¾‹å­ï¼Œ</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">i</span> <span class="o">%</span> <span class="mi">2</span><span class="p">)</span> <span class="ow">and</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">3</span><span class="p">]</span>
</code></pre></div></div>

<p>ç›¸å½“äº</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">list1</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
	<span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">i</span> <span class="o">%</span> <span class="mi">2</span><span class="p">)</span> <span class="ow">and</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">3</span><span class="p">:</span>
		<span class="n">list1</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</code></pre></div></div>

<h4 id="å­—å…¸æ¨å¯¼å¼--dictionary-comprehension-">å­—å…¸æ¨å¯¼å¼ ï¼ˆ dictionary comprehension ï¼‰</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="p">{</span><span class="n">i</span><span class="p">:</span><span class="n">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)}</span>
<span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span><span class="bp">False</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span> <span class="p">...}</span>
</code></pre></div></div>

<h4 id="ç»“åˆæ¨å¯¼å¼--set-comprehension-">ç»“åˆæ¨å¯¼å¼ ï¼ˆ set comprehension ï¼‰</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="p">{</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">]}</span>
<span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">}</span>
</code></pre></div></div>

<p>ä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼š</p>

<ol>
  <li>
    <p><strong>ä¸å­˜åœ¨å­—ç¬¦ä¸²æ¨å¯¼å¼</strong>ï¼Œ</p>

    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="o">&gt;&gt;&gt;</span> <span class="s">"i for i in 'I love FishC.com!'"</span>
  <span class="s">"i for i in 'I love FishC.com!'"</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>å…ƒç»„æ¨å¯¼å¼å³ä½ç”Ÿæˆå™¨è¡¨è¾¾å¼ï¼ˆ generator expressions ï¼‰æœ¬èº«ã€‚</p>

    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="o">&gt;&gt;&gt;</span> <span class="p">(</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
  <span class="o">&lt;</span><span class="n">generator</span> <span class="nb">object</span> <span class="o">&lt;</span><span class="n">genexpr</span><span class="o">&gt;</span> <span class="n">at</span> <span class="mh">0x03135300</span><span class="o">&gt;</span>
</code></pre></div>    </div>

    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="o">&gt;&gt;&gt;</span> <span class="n">e</span> <span class="o">=</span> <span class="p">(</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
  <span class="mi">0</span>
  <span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span> <span class="p">(</span><span class="n">e</span><span class="p">)</span>
  <span class="mi">1</span>
  <span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
  <span class="mi">2</span>
  <span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">each</span> <span class="ow">in</span> <span class="n">e</span><span class="p">:</span>
          <span class="k">print</span><span class="p">(</span><span class="n">each</span><span class="p">)</span>
  <span class="mi">3</span>
  <span class="mi">4</span>
  <span class="mi">5</span>
  <span class="mi">6</span>
  <span class="mi">7</span>
  <span class="mi">8</span>
  <span class="mi">9</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>ç”Ÿæˆå™¨è¡¨è¾¾å™¨å¯ä»¥ä½œä¸ºå‡½æ•°çš„å‚æ•°ä½¿ç”¨ï¼Œå¯ä»¥ç›´æ¥å†™æ¨å¯¼å¼ï¼Œè€Œä¸å¿…åŠ å°æ‹¬å·ï¼š</p>

    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="o">&gt;&gt;&gt;</span> <span class="nb">sum</span><span class="p">(</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">2</span><span class="p">)</span>
  <span class="mi">2500</span>
</code></pre></div>    </div>

    <p>ç­‰åŒäºï¼Œ</p>

    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="o">&gt;&gt;&gt;</span> <span class="nb">sum</span><span class="p">((</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">2</span><span class="p">))</span>
  <span class="mi">2500</span>
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="ä½œä¸š">ä½œä¸š</h3>

<blockquote>
  <p>ä½œä¸š 1ï¼š</p>
</blockquote>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s">"""
è¦æ±‚å®ç°ä¸€ä¸ªåŠŸèƒ½ä¸ reversed()ç›¸åŒ ï¼ˆå†…ç½®å‡½æ•° reversed(seq)ï¼‰æ˜¯è¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼Œæ˜¯åºåˆ—seqçš„é€†åºæ˜¾ç¤ºï¼‰çš„ç”Ÿæˆå™¨ã€‚ä¾‹å¦‚ï¼š

&gt;&gt;&gt; for i in myRev("FishC")
        print(i, end='')
&gt;&gt;&gt; ChsiF
"""</span>
<span class="k">def</span> <span class="nf">myRev</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>

	<span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
	<span class="k">yield</span> <span class="n">data</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
	<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">myRev</span><span class="p">(</span><span class="s">"FishC"</span><span class="p">):</span>
		<span class="k">print</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s">''</span><span class="p">)</span>
</code></pre></div></div>

<blockquote>
  <p>ä½œä¸š 2ï¼š</p>
</blockquote>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s">"""
10 ä»¥å†…çš„ç´ æ•°ä¹‹å’Œæ˜¯ï¼š2 + 3 + 5 + 7 = 17ï¼Œé‚£ä¹ˆè¯·ç¼–å†™ç¨‹åºï¼Œè®¡ç®— 2000000 ä»¥å†…çš„ç´ æ•°ä¹‹å’Œï¼Ÿ
"""</span>

<span class="kn">import</span> <span class="nn">math</span>


<span class="k">def</span> <span class="nf">primeIF</span><span class="p">(</span><span class="n">number</span><span class="p">):</span>
    <span class="s">"""  # è¿™ä¸ªç®—æ³•æ•ˆç‡å¤ªä½
    for i in range(number):
        if i == 0 or i == 1 or i == number:
            continue
        else:
            if number % i == 0:
                return False
            else:
                continue
    return True
    """</span>
    <span class="k">if</span> <span class="n">number</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">number</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">if</span> <span class="n">number</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="p">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">number</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span> <span class="mi">2</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">number</span> <span class="o">%</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">False</span>
        <span class="k">return</span> <span class="bp">True</span>


<span class="k">def</span> <span class="nf">primeCOUNT</span><span class="p">(</span><span class="n">InputNumber</span><span class="p">,</span> <span class="n">number</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">InputNumber</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">primeIF</span><span class="p">(</span><span class="n">number</span><span class="p">):</span>
            <span class="k">yield</span> <span class="n">number</span>
        <span class="n">number</span> <span class="o">+=</span> <span class="mi">1</span>


<span class="k">def</span> <span class="nf">primeSUM</span><span class="p">(</span><span class="n">InputNumber</span><span class="p">):</span>
    <span class="n">SUM</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">primeCOUNT</span><span class="p">(</span><span class="n">InputNumber</span><span class="p">):</span>
        <span class="n">SUM</span> <span class="o">+=</span> <span class="n">i</span>
    <span class="k">print</span><span class="p">(</span><span class="n">SUM</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">primeSUM</span><span class="p">(</span><span class="mi">2000000</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="å…³äº-yield-ä¸-generator-æé«˜ç¯‡">å…³äº yield ä¸ Generator æé«˜ç¯‡</h3>

<h4 id="ååŒååŒç¨‹åºä¸å­ä¾‹ç¨‹">ååŒï¼ˆååŒç¨‹åºï¼‰ä¸å­ä¾‹ç¨‹</h4>

<p><code class="language-plaintext highlighter-rouge">return</code>éšå«çš„æ„æ€æ˜¯å‡½æ•°æ­£åœ¨å°†æ‰§è¡Œä»£ç çš„æ§åˆ¶æƒè¿”å›ç»™å‡½æ•°è¢«è°ƒç”¨çš„åœ°æ–¹ã€‚è€Œ<code class="language-plaintext highlighter-rouge">yield</code>çš„éšå«æ„æ€æ˜¯æ§åˆ¶æƒçš„è½¬ç§»æ˜¯ä¸´æ—¶å’Œè‡ªæ„¿çš„ï¼Œæˆ‘ä»¬çš„å‡½æ•°å°†æ¥è¿˜ä¼šæ”¶å›æ§åˆ¶æƒã€‚</p>

<p>ä¸ºäº†æ›´å¥½çš„ç†è§£ç”Ÿæˆå™¨æ‰€è§£å†³çš„é—®é¢˜ï¼Œå§‹ç»ˆè®°ä½æˆ‘ä»¬éœ€è¦è§£å†³çš„é—®é¢˜ï¼š<strong>ç”Ÿæˆå€¼çš„åºåˆ—</strong>ã€‚</p>

<p><strong>ä¸€ä¸ªç”Ÿæˆå™¨ä¼šç”Ÿæˆå€¼</strong>ï¼Œç”Ÿæˆå™¨å‡½æ•°è¿”å›ç”Ÿæˆå™¨çš„è¿­ä»£å™¨ã€‚ä½œä¸ºä¸€ä¸ªè¿­ä»£å™¨ï¼Œç”Ÿæˆå™¨å¿…é¡»è¦å®šä¹‰ä¸€äº›æ–¹æ³•ï¼Œå…¶ä¸­ä¸€ä¸ªå°±æ˜¯<code class="language-plaintext highlighter-rouge">__next__()</code>ã€‚åŒè¿­ä»£å™¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code class="language-plaintext highlighter-rouge">next()</code>å‡½æ•°æ¥è·å–ä¸‹ä¸€ä¸ªå€¼ã€‚</p>

<p>ä¸‹é¢å¼•å…¥ä¸€ä¸ªä¾‹å­ï¼Œ</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">simple_generator_function</span><span class="p">():</span>
	<span class="k">yield</span> <span class="mi">1</span>
	<span class="k">yield</span> <span class="mi">2</span>
	<span class="k">yield</span> <span class="mi">3</span>
</code></pre></div></div>

<p>è¿™é‡Œæœ‰ä¸¤ä¸ªç®€å•çš„æ–¹æ³•æ¥ä½¿ç”¨å®ƒï¼š</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">simple_generator_function</span><span class="p">():</span>
	<span class="k">print</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
<span class="mi">1</span>
<span class="mi">2</span>
<span class="mi">3</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">our_generator</span> <span class="o">=</span> <span class="n">simple_generator_function</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">our_generator</span><span class="p">)</span>
<span class="mi">1</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">our_generator</span><span class="p">)</span>
<span class="mi">2</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">our_generator</span><span class="p">)</span>
<span class="mi">3</span>
</code></pre></div></div>

<p>å½“ä¸€ä¸ªç”Ÿæˆå™¨å‡½æ•°è°ƒç”¨<code class="language-plaintext highlighter-rouge">yield</code>ï¼Œç”Ÿæˆå™¨å‡½æ•°çš„â€œçŠ¶æ€â€ä¼šè¢«å†»ç»“ã€‚å¦‚æœæ°¸è¿œä¸è°ƒç”¨<code class="language-plaintext highlighter-rouge">next()</code>ï¼Œ<code class="language-plaintext highlighter-rouge">yield</code>ä¿å­˜çš„çŠ¶æ€å°±è¢«æ— è§†äº†ã€‚</p>

<p>åœ¨ PEP 342 ä¸­åŠ å…¥äº†å°†å€¼ä¼ ç»™ç”Ÿæˆå™¨çš„æ”¯æŒï¼Œèƒ½è®©ç”Ÿæˆå™¨åœ¨å•ä¸€è¯­å¥ä¸­å®ç°ï¼Œç”Ÿæˆä¸€ä¸ªå€¼ï¼Œæ¥å—ä¸€ä¸ªå€¼ï¼Œæˆ–åŒäº‹ç”Ÿæˆä¸€ä¸ªå€¼å¹¶æ¥å—ä¸€ä¸ªå€¼ã€‚</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="n">is_prime</span><span class="p">(</span><span class="n">number</span><span class="p">):</span>
	<span class="n">number</span> <span class="o">=</span> <span class="k">yield</span> <span class="n">number</span>
<span class="n">number</span> <span class="o">+=</span> <span class="mi">1</span>
</code></pre></div></div>

<p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ¯æ¬¡æ‰§è¡Œ <code class="language-plaintext highlighter-rouge">yield</code> çš„æ—¶å€™ä¸º number è®¾ç½®ä¸åŒçš„å€¼ã€‚</p>

<h3 id="nextå’Œsendç”¨æ³•"><code class="language-plaintext highlighter-rouge">next()</code>å’Œ<code class="language-plaintext highlighter-rouge">send()</code>ç”¨æ³•</h3>

<ul>
  <li>
    <p>å¦‚æœ<code class="language-plaintext highlighter-rouge">send</code>ä¸æºå¸¦å‚æ•°ï¼Œé‚£ä¹ˆ<code class="language-plaintext highlighter-rouge">send(None)</code> å’Œ<code class="language-plaintext highlighter-rouge">next()</code>çš„ä½œç”¨çš„ç›¸åŒçš„</p>

    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">a</span><span class="p">():</span>
      <span class="k">print</span><span class="p">(</span><span class="s">'aaa'</span><span class="p">)</span>
      <span class="n">p</span> <span class="o">=</span> <span class="k">yield</span> <span class="s">'123'</span>
      <span class="k">print</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
      <span class="k">print</span><span class="p">(</span><span class="s">'bbb'</span><span class="p">)</span>

  <span class="o">&gt;&gt;&gt;</span> <span class="n">r</span> <span class="o">=</span> <span class="n">a</span><span class="p">()</span>
  <span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">r</span><span class="p">))</span>
  <span class="c1"># ç­‰åŒäºprint(r.send(None))
</span>  <span class="c1"># äºŒè€…ï¼Œä½¿ç”¨next(r) å’Œ r.send(None)è¾“å‡ºçš„ç»“æœéƒ½æ˜¯ 123
</span>  <span class="c1"># å¦å¤–æ³¨æ„ï¼Œè¿™é‡Œçš„på˜é‡çš„å€¼éƒ½æ˜¯None
</span>	
  <span class="n">aaa</span>
  <span class="mi">123</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>å¦‚æœ<code class="language-plaintext highlighter-rouge">send</code>çš„å‚æ•°ä¸æ˜¯<code class="language-plaintext highlighter-rouge">None</code>ï¼Œåˆ™æ˜¯æŠŠ<code class="language-plaintext highlighter-rouge">yield xx</code>å½“æˆä¸€ä¸ªè¡¨è¾¾å¼ï¼Œä¸”æŠŠ<code class="language-plaintext highlighter-rouge">send</code>çš„å‚æ•°çš„å€¼èµ‹ç»™äº†pï¼›è€Œåçš„æ“ä½œåŒnextä¸€æ ·ï¼Œå¦‚ï¼š</p>

    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">a</span><span class="p">():</span>
      <span class="k">print</span><span class="p">(</span><span class="s">'aaa'</span><span class="p">)</span>
      <span class="n">p1</span> <span class="o">=</span> <span class="k">yield</span> <span class="s">'123'</span>
      <span class="k">print</span><span class="p">(</span><span class="s">'bbb'</span><span class="p">)</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">p1</span> <span class="o">==</span> <span class="s">'hello'</span><span class="p">):</span>
          <span class="k">print</span><span class="p">(</span><span class="s">'p1æ˜¯sendä¼ è¿‡æ¥çš„'</span><span class="p">)</span>
          <span class="n">p2</span> <span class="o">=</span> <span class="k">yield</span> <span class="s">'234'</span>
          <span class="k">print</span><span class="p">(</span><span class="n">p2</span><span class="p">)</span>

  <span class="o">&gt;&gt;&gt;</span> <span class="n">r</span> <span class="o">=</span> <span class="n">a</span><span class="p">()</span>
  <span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
  <span class="o">&gt;&gt;&gt;</span> <span class="n">r</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="s">'hello'</span><span class="p">)</span>

  <span class="n">aaa</span> <span class="c1"># æ‰§è¡Œç¬¬ä¸€æ¬¡ `next()` åœ¨ç¬¬ä¸€æ¬¡æ‰“å° `aaa`ï¼Œåœ¨ p1 = yield '123' å¤„æš‚åœ
</span>  <span class="n">bbb</span> <span class="c1"># æ‰§è¡Œç¬¬äºŒæ¬¡ `next()` ï¼Œæ‰“å°'bbb' å’Œ 'p1æ˜¯sendä¼ è¿‡æ¥çš„'
</span>  <span class="n">p1æ˜¯sendä¼ è¿‡æ¥çš„</span>
</code></pre></div>    </div>
  </li>
</ul>

<blockquote>
  <p>å®ä¾‹ï¼šæ‰¾å‡ºæ¯”æŸä¸ªæ•°çš„ç­‰æ¯”çº§æ•°å¤§çš„æœ€å°ç´ æ•°ï¼ˆ ä¾‹å¦‚ 10ï¼Œæˆ‘ä»¬è¦ç”Ÿæˆæ¯” 10ï¼Œ100ï¼Œ1000ï¼Œ10000 â€¦ å¤§çš„æœ€å°ç´ æ•°ï¼‰ã€‚æˆ‘ä»¬ä» <code class="language-plaintext highlighter-rouge">get_primes</code> å¼€å§‹ï¼š</p>
</blockquote>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">print_successive_primes</span><span class="p">(</span><span class="n">iterations</span><span class="p">,</span> <span class="n">base</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
	<span class="n">prime_generator</span> <span class="o">=</span> <span class="n">get_primes</span><span class="p">(</span><span class="n">base</span><span class="p">)</span>
	<span class="n">prime_generator</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
	<span class="k">for</span> <span class="n">power</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">itarations</span><span class="p">):</span>
		<span class="k">print</span><span class="p">(</span><span class="n">prime_generator</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">base</span> <span class="o">**</span> <span class="n">power</span><span class="p">))</span>

<span class="k">def</span> <span class="nf">get_primes</span><span class="p">(</span><span class="n">number</span><span class="p">):</span>
	<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
		<span class="k">if</span> <span class="n">is_prime</span><span class="p">(</span><span class="n">number</span><span class="p">):</span>
			<span class="n">number</span> <span class="o">=</span> <span class="k">yield</span> <span class="n">number</span>
		<span class="n">number</span> <span class="o">+=</span> <span class="mi">1</span>
</code></pre></div></div>

<p>æœ¬ä¾‹ä¸­çš„æ³¨æ„äº‹é¡¹ï¼š</p>

<ol>
  <li>
    <p>æˆ‘ä»¬æ‰“å°çš„æ˜¯ generator.send çš„ç»“æœï¼Œè¿™æ˜¯æ²¡é—®é¢˜çš„ï¼Œå› ä¸º<code class="language-plaintext highlighter-rouge">send</code>åœ¨å‘é€æ•°æ®ç»™ç”Ÿæˆå™¨çš„åŒæ—¶è¿˜è¿”å›ç”Ÿæˆå™¨é€šè¿‡<code class="language-plaintext highlighter-rouge">yield</code>ç”Ÿæˆçš„å€¼ï¼ˆå°±å¦‚åŒç”Ÿæˆå™¨ä¸­ <code class="language-plaintext highlighter-rouge">yield</code> è¯­å¥åšçš„é‚£æ ·ï¼‰</p>
  </li>
  <li>
    <p>å½“ä½ ç”¨ <code class="language-plaintext highlighter-rouge">send</code> æ¥â€œå¯åŠ¨â€ä¸€ä¸ªç”Ÿæˆå™¨æ—¶ï¼Œå¿…é¡»å‘åŠ¨<code class="language-plaintext highlighter-rouge">None</code>ã€‚è¿™ä¸éš¾ç†è§£ï¼Œæ ¹æ®åˆšæ‰çš„æè¿°ï¼Œç”Ÿæˆå™¨è¿˜æ²¡æœ‰èµ°åˆ°ç¬¬ä¸€ä¸ª<code class="language-plaintext highlighter-rouge">yield</code>è¯­å¥ï¼Œå¦‚æœæˆ‘ä»¬å‘ç”Ÿä¸€ä¸ªçœŸå®çš„å€¼ï¼Œè¿™æ—¶æ˜¯æ²¡æœ‰äººå»â€œæ¥æ”¶â€å®ƒçš„ã€‚ä¸€æ—¦ç”Ÿæˆå™¨å¯åŠ¨äº†ï¼Œæˆ‘ä»¬å°±å¯ä»¥åƒä¸Šé¢é‚£æ ·å‘é€æ•°æ®äº†</p>
  </li>
</ol>

<h3 id="æ€»ç»“">æ€»ç»“</h3>

<ul>
  <li>
    <p>generator æ˜¯ç”¨æ¥äº§ç”Ÿä¸€ç³»åˆ—å€¼çš„</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">yield</code> åˆ™åƒæ˜¯ generator å‡½æ•°çš„è¿”å›ç»“æœ</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">yield</code> å”¯ä¸€æ‰€åšçš„å¦ä¸€ä»¶äº‹å°±æ˜¯ä¿å­˜ä¸€ä¸ª generator å‡½æ•°çš„çŠ¶æ€</p>
  </li>
  <li>
    <p>generator å°±æ˜¯ä¸€ä¸ªç‰¹æ®Šç±»å‹çš„è¿­ä»£å™¨</p>
  </li>
  <li>
    <p>å’Œè¿­ä»£å™¨ç›¸ä¼¼ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨ <code class="language-plaintext highlighter-rouge">next()</code> æ¥ä» generator ä¸­è·å–ä¸‹ä¸€ä¸ªå€¼</p>
  </li>
  <li>
    <p>é€šè¿‡éšå¼åœ°è°ƒç”¨ <code class="language-plaintext highlighter-rouge">next()</code> æ¥å¿½ç•¥ä¸€äº›å€¼</p>
  </li>
</ul>

:ET